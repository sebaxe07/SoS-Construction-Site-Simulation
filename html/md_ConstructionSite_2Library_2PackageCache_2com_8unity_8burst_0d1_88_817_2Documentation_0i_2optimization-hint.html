<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Hint intrinsics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Hint intrinsics</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md858"></a></p>
<p>Use the <a href="xref:Unity.Burst.CompilerServices.Hint"><code>Hint</code></a> intrinsics to add information to your code which helps with <a class="el" href="namespaceBurst.html">Burst</a> optimization. It has the following methods:</p>
<ul>
<li><a href="xref:Unity.Burst.CompilerServices.Hint.Likely*"><code>Unity.Burst.CompilerServices.Hint.Likely</code></a>: Tells <a class="el" href="namespaceBurst.html">Burst</a> that a Boolean condition is likely to be true.</li>
<li><a href="xref:Unity.Burst.CompilerServices.Hint.Unlikely*"><code>Unity.Burst.CompilerServices.Hint.Unlikely</code></a>: Tells <a class="el" href="namespaceBurst.html">Burst</a> that a Boolean condition is unlikely to be true.</li>
<li><a href="xref:Unity.Burst.CompilerServices.Hint.Assume*"><code>Unity.Burst.CompilerServices.Hint.Assume</code></a>: Tells <a class="el" href="namespaceBurst.html">Burst</a> that it can assume a Boolean condition is true.</li>
</ul>
<h1><a class="anchor" id="autotoc_md859"></a>
Likely intrinsic</h1>
<p>The <code>Likely</code> intrinsic is most useful to tell <a class="el" href="namespaceBurst.html">Burst</a> which branch condition has a high probability of being true. This means that <a class="el" href="namespaceBurst.html">Burst</a> can focus on the branch in question for optimization purposes:</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespaceUnity.html">Unity</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst.html">Burst</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst_1_1CompilerServices.html">CompilerServices</a>.<a class="code hl_class" href="classUnity_1_1Burst_1_1CompilerServices_1_1Hint.html">Hint</a>.Likely(b))</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Any code in here will be optimized by Burst with the assumption that we&#39;ll probably get here!</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Whereas the code in here will be kept out of the way of the optimizer.</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassUnity_1_1Burst_1_1CompilerServices_1_1Hint_html"><div class="ttname"><a href="classUnity_1_1Burst_1_1CompilerServices_1_1Hint.html">Unity.Burst.CompilerServices.Hint</a></div><div class="ttdef"><b>Definition</b> Hint.cs:7</div></div>
<div class="ttc" id="anamespaceUnity_1_1Burst_1_1CompilerServices_html"><div class="ttname"><a href="namespaceUnity_1_1Burst_1_1CompilerServices.html">Unity.Burst.CompilerServices</a></div><div class="ttdef"><b>Definition</b> Aliasing.cs:2</div></div>
<div class="ttc" id="anamespaceUnity_1_1Burst_html"><div class="ttname"><a href="namespaceUnity_1_1Burst.html">Unity.Burst</a></div><div class="ttdef"><b>Definition</b> BurstDisassembler.Core.ARM64.info.cs:5</div></div>
<div class="ttc" id="anamespaceUnity_html"><div class="ttname"><a href="namespaceUnity.html">Unity</a></div><div class="ttdef"><b>Definition</b> Dict.cs:35</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md860"></a>
Unlikely intrinsic</h1>
<p>The <code>Unlikely</code> intrinsic tells <a class="el" href="namespaceBurst.html">Burst</a> the opposite of the <code>Likely</code> intrinsic: the condition is unlikely to be true, and it should optimize against it:</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespaceUnity.html">Unity</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst.html">Burst</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst_1_1CompilerServices.html">CompilerServices</a>.<a class="code hl_class" href="classUnity_1_1Burst_1_1CompilerServices_1_1Hint.html">Hint</a>.Unlikely(b))</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Whereas the code in here will be kept out of the way of the optimizer.</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Any code in here will be optimized by Burst with the assumption that we&#39;ll probably get here!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>The <code>Likely</code> and <code>Unlikely</code> intrinsics make sure that <a class="el" href="namespaceBurst.html">Burst</a> places the code most likely to be hit after the branching condition in the binary. This means that the code has a high probability of being in the instruction cache. <a class="el" href="namespaceBurst.html">Burst</a> can also hoist the code out of the likely branch and spend extra time optimizing it, and not spend as much time looking at the unlikely code.</p>
<p>An example of an unlikely branch is to check if result of an allocation is valid. The allocation is valid most of all the time, so you want the code to be fast with that assumption, but you want an error case to fall back to.</p>
<h1><a class="anchor" id="autotoc_md861"></a>
Assume intrinsic</h1>
<p>The <code>Assume</code> intrinsic is powerful. Use it with caution because it tells <a class="el" href="namespaceBurst.html">Burst</a> that a condition is always true.</p>
<p>&gt;[!WARNING] &gt;When you use <code>Assume</code>, <a class="el" href="namespaceBurst.html">Burst</a> assumes the value is true without checking whether it's true.</p>
<div class="fragment"><div class="line"><span class="preprocessor"> #</span></div>
<div class="line"><a class="code hl_namespace" href="namespaceUnity.html">Unity</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst.html">Burst</a>.<a class="code hl_namespace" href="namespaceUnity_1_1Burst_1_1CompilerServices.html">CompilerServices</a>.<a class="code hl_class" href="classUnity_1_1Burst_1_1CompilerServices_1_1Hint.html">Hint</a>.Assume(b);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (b)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Burst has been told that b is always true, so this branch will always be taken.</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Any code in here will be removed from the program because b is always true!</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Use the <code>Assume</code> intrinsic to arbitrarily tell <a class="el" href="namespaceBurst.html">Burst</a> that something is true. For example, you can use <code>Assume</code> to tell <a class="el" href="namespaceBurst.html">Burst</a> to assume that a loop end is always a multiple of 16, which means that it can provide perfect vectorization without any scalar spilling for that loop. You could also use it to tell <a class="el" href="namespaceBurst.html">Burst</a> that a value isn't <code>NaN</code>, or it's negative. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
