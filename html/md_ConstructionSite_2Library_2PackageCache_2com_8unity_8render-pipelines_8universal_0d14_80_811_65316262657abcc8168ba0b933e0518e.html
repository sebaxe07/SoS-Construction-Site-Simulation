<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Visualizing normal vectors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Visualizing normal vectors</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md2661"></a></p>
<p>The <a class="el" href="namespaceUnity.html">Unity</a> shader in this example visualizes the normal vector values on the mesh.</p>
<p>Use the <a class="el" href="namespaceUnity.html">Unity</a> shader source file from section <a class="el" href="md_ConstructionSite_2Library_2PackageCache_2com_8unity_8render-pipelines_8universal_0d14_80_811_843033d7aedc1258130216e160198945.html">URP unlit basic shader</a> and make the following changes to the ShaderLab code:</p>
<ol type="1">
<li><p class="startli">In <code>struct Attributes</code>, which is the input structure for the vertex shader in this example, declare the variable containing the normal vector for each vertex.</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   <span class="keyword">struct </span>Attributes</div>
<div class="line">   {</div>
<div class="line">       float4 positionOS   : POSITION;</div>
<div class="line">       <span class="comment">// Declaring the variable containing the normal vector for each vertex.</span></div>
<div class="line">       half3 normal        : NORMAL;</div>
<div class="line">   };</div>
</div><!-- fragment --></li>
<li><p class="startli">In <code>struct Varyings</code>, which is the input structure for the fragment shader in this example, declare the variable for storing the normal vector values for each fragment:</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   <span class="keyword">struct </span>Varyings</div>
<div class="line">   {</div>
<div class="line">       float4 positionHCS  : SV_POSITION;</div>
<div class="line">       <span class="comment">// The variable for storing the normal vector values.</span></div>
<div class="line">       half3 normal        : TEXCOORD0;</div>
<div class="line">   };</div>
</div><!-- fragment --><p class="startli">This example uses the three components of the normal vector as RGB color values for each fragment.</p>
</li>
<li><p class="startli">To render the normal vector values on the mesh, use the following code as the fragment shader:</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   half4 frag(Varyings IN) : SV_Target</div>
<div class="line">   {</div>
<div class="line">       half4 color = 0;</div>
<div class="line">       color.rgb = IN.normal;</div>
<div class="line">       <span class="keywordflow">return</span> color;</div>
<div class="line">   }</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="namespaceUnity.html">Unity</a> renders the normal vector values on the mesh:</p>
<p class="startli"><img src="Images/shader-examples/unlit-shader-tutorial-normals-uncompressed.png" alt="Rendering normals without compression" class="inline"/></p>
<p class="startli">A part of the capsule is black. This is because in those points, all three components of the normal vector are negative. The next step shows how to render values in those areas as well.</p>
</li>
<li><p class="startli">To render negative normal vector components, use the compression technique. To compress the range of normal component values <code>(-1..1)</code> to color value range <code>(0..1)</code>, change the following line:</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   color.rgb = IN.normal;</div>
</div><!-- fragment --><p class="startli">to this line:</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   color.rgb = IN.normal * 0.5 + 0.5;</div>
</div><!-- fragment --></li>
</ol>
<p>Now <a class="el" href="namespaceUnity.html">Unity</a> renders the normal vector values as colors on the mesh.</p>
<p><img src="Images/shader-examples/unlit-shader-tutorial-normals.png" alt="Rendering normals with compression" class="inline"/></p>
<p>Below is the complete ShaderLab code for this example.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="comment">// This shader visuzlizes the normal vector values on the mesh.</span></div>
<div class="line">Shader <span class="stringliteral">&quot;Example/URPUnlitShaderNormal&quot;</span></div>
<div class="line">{</div>
<div class="line">    Properties</div>
<div class="line">    { }</div>
<div class="line"> </div>
<div class="line">    SubShader</div>
<div class="line">    {</div>
<div class="line">        Tags { <span class="stringliteral">&quot;RenderType&quot;</span> = <span class="stringliteral">&quot;Opaque&quot;</span> <span class="stringliteral">&quot;RenderPipeline&quot;</span> = <span class="stringliteral">&quot;UniversalPipeline&quot;</span> }</div>
<div class="line"> </div>
<div class="line">        Pass</div>
<div class="line">        {</div>
<div class="line">            HLSLPROGRAM</div>
<div class="line"><span class="preprocessor">            #pragma vertex vert</span></div>
<div class="line"><span class="preprocessor">            #pragma fragment frag</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">            #include &quot;Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl&quot;</span></div>
<div class="line"> </div>
<div class="line">            <span class="keyword">struct </span>Attributes</div>
<div class="line">            {</div>
<div class="line">                float4 positionOS   : POSITION;</div>
<div class="line">                <span class="comment">// Declaring the variable containing the normal vector for each</span></div>
<div class="line">                <span class="comment">// vertex.</span></div>
<div class="line">                half3 normal        : NORMAL;</div>
<div class="line">            };</div>
<div class="line"> </div>
<div class="line">            <span class="keyword">struct </span>Varyings</div>
<div class="line">            {</div>
<div class="line">                float4 positionHCS  : SV_POSITION;</div>
<div class="line">                half3 normal        : TEXCOORD0;</div>
<div class="line">            };</div>
<div class="line"> </div>
<div class="line">            Varyings vert(Attributes IN)</div>
<div class="line">            {</div>
<div class="line">                Varyings OUT;</div>
<div class="line">                OUT.positionHCS = TransformObjectToHClip(IN.positionOS.xyz);</div>
<div class="line">                <span class="comment">// Use the TransformObjectToWorldNormal function to transform the</span></div>
<div class="line">                <span class="comment">// normals from object to world space. This function is from the</span></div>
<div class="line">                <span class="comment">// SpaceTransforms.hlsl file, which is referenced in Core.hlsl.</span></div>
<div class="line">                OUT.normal = TransformObjectToWorldNormal(IN.normal);</div>
<div class="line">                <span class="keywordflow">return</span> OUT;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            half4 frag(Varyings IN) : SV_Target</div>
<div class="line">            {</div>
<div class="line">                half4 color = 0;</div>
<div class="line">                <span class="comment">// IN.normal is a 3D vector. Each vector component has the range</span></div>
<div class="line">                <span class="comment">// -1..1. To show all vector elements as color, including the</span></div>
<div class="line">                <span class="comment">// negative values, compress each value into the range 0..1.</span></div>
<div class="line">                color.rgb = IN.normal * 0.5 + 0.5;</div>
<div class="line">                <span class="keywordflow">return</span> color;</div>
<div class="line">            }</div>
<div class="line">            ENDHLSL</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
